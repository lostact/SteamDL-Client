<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>در حال بروزرسانی - SteamDL</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="fonts/vazir/Vazirmatn-font-face.css" rel="stylesheet">
  <link href="css/index.css" rel="stylesheet">
  <script>
    if (localStorage.getItem('darkMode') === 'enabled') {
      document.documentElement.classList.add('dark');
      document.addEventListener('DOMContentLoaded', () => document.body.classList.add('dark'));
    }
  </script>
</head>
<body>
  <main class="phone" role="application" aria-label="در حال بروزرسانی">
    <div class="top-bar pywebview-drag-region">
      <button type="button" id="close_button" class="button close">&times;</button>
      <button type="button" id="minimize_button" class="button minimize">&minus;</button>
    </div>

    <div class="app">

      <header class="header">
        <div class="brand">
          <img class="logo-img" src="images/Steamdlx180.png" alt="SteamDL" />
          <div class="brand-title">
            <div class="t">استیم دی ال</div>
          </div>
        </div>
      </header>

      <section class="card" aria-label="بروزرسانی">
        <div style="display:flex; align-items:center; justify-content:space-between; gap:12px;">
          <div>
            <h1 class="section-title" style="font-size: 16px; margin-bottom: 4px;">در حال بروزرسانی...</h1>
            <p class="desc" id="loadingText" style="font-size: 12px; color: var(--muted);">لطفاً چند لحظه صبر کنید.</p>
          </div>
          <div class="spinner" aria-hidden="true" style="width: 32px; height: 32px; border: 3px solid rgba(37,99,235,.18); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite;"></div>
        </div>

        <div class="progress" style="height: 10px; border-radius: 999px; background: rgba(17,24,39,.08); overflow: hidden; margin-top: 16px; direction: ltr;">
          <div id="progress-bar-inner" style="height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--primary2)); transition: width .3s ease;"></div>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
          <p class="desc" style="font-size: 11px; color: var(--muted);">پس از اتمام، برنامه مجدداً راه اندازی می شود.</p>
          <span id="progress-text" style="font-size: 12px; font-weight: 900; color: var(--primary);">0%</span>
        </div>
      </section>

    </div>
  </main>

  <style>
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>

  <script src="js/update.js"></script>
</body>
</html>
